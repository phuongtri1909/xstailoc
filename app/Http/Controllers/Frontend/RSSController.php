<?phpnamespace App\Http\Controllers\Frontend;use App\Models\Province;use Illuminate\Http\Request;use App\Http\Controllers\Controller;use App\Models\Lottery;use Cache;use App\Models\Post;use App\Models\News;class RSSController extends Controller{    public function index(){        $mb_province = Province::where('mien', 1)->get();        $mt_province = Province::where('mien', 2)->get();        $mn_province = Province::where('mien', 3)->get();        return view('frontend.rss.index',compact('mb_province','mt_province','mn_province'));    }		public function rssIndex(){        return view('frontend.rss.rss_index');    }		public function rssNew() {        // $until = date('Y-m-d');        // $since = date('Y-m-d', strtotime("-365 days"));        $items = News::select('id', 'title', 'des', 'updated_at', 'slug')->orderBy('id', 'DESC')->paginate(120);        return response()->view('frontend.rss.list_new', [            'items' => $items,        ])->header('Content-Type', 'text/xml');    }    public function rss($slug)    {        $pro = Province::where('slug',$slug)->first();        if(empty($pro)) return view('errors.404');        $kqs = Lottery::where('province_id',$pro->id)->orderBy('date', 'DESC')->take(5)->get();        return response()->view('frontend.rss.rss', [            'pro' => $pro,            'kqs' => $kqs,        ])->header('Content-Type', 'text/xml');    }		public function rssDuDoanXSMB() {        // $until = date('Y-m-d');        // $since = date('Y-m-d', strtotime("-365 days"));        $items = Post::select('id', 'title', 'des', 'date')->where('category_id', 1)->orderBy('date', 'DESC')->paginate(120);        return response()->view('frontend.rss.dudoanxsmb', [            'items' => $items,        ])->header('Content-Type', 'text/xml');    }		public function rssDuDoanXSMN() {        $items = Post::select('id', 'title', 'des', 'date')->where('category_id', 3)->orderBy('date', 'DESC')->paginate(120);        return response()->view('frontend.rss.dudoanxsmn', [            'items' => $items,        ])->header('Content-Type', 'text/xml');    }    public function rssDuDoanXSMT() {        $items = Post::select('id', 'title', 'des', 'date')->where('category_id', 2)->orderBy('date', 'DESC')->paginate(120);        return response()->view('frontend.rss.dudoanxsmt', [            'items' => $items,        ])->header('Content-Type', 'text/xml');    }    public function xsmb()    {        $kqs = Lottery::where('mien',1)->orderBy('date', 'DESC')->take(5)->get();        return response()->view('frontend.rss.xsmb', [            'kqs' => $kqs,        ])->header('Content-Type', 'text/xml');    }    public function xsmt()    {        $list_5day = Lottery::where('mien',2)->select('date')->orderBy('date', 'DESC')->distinct()->take(5)->get();        $kqxsmns = array();        foreach ($list_5day as $item) {            $kqxsmns[$item->date] = Lottery::where('mien', 2)->where('date', $item->date)->get();        }        return response()->view('frontend.rss.xsmt', [            'kqxsmns' => $kqxsmns,        ])->header('Content-Type', 'text/xml');    }    public function xsmn()    {        $list_5day = Lottery::where('mien', 3)->select('date')->orderBy('date', 'DESC')->distinct()->take(5)->get();        $kqxsmns = array();        foreach ($list_5day as $item) {            $kqxsmns[$item->date] = Lottery::where('mien', 3)->where('date', $item->date)->get();        }        return response()->view('frontend.rss.xsmn', [            'kqxsmns' => $kqxsmns,        ])->header('Content-Type', 'text/xml');    }}